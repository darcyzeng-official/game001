<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€èµ·ç©å§</title>
    <style>
        body {
            background-color: #000;
            color: #d1d1d1;
            font-family: "Courier New", monospace;
            text-align: center;
            padding-top: 100px;
            background-image: radial-gradient(circle at 50% 50%, #1a1a1a, #000 90%);
            overflow: hidden;
            height: 100vh;
            transition: background 1s ease, color 1s ease;
        }

        h1 {
            color: #8b0000;
            text-shadow: 0 0 15px #ff0000;
            animation: flicker 2s infinite;
            letter-spacing: 2px;
        }

        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; }
            20%, 24%, 55% { opacity: 0.2; }
        }

        button {
            background: #111;
            border: 1px solid #333;
            color: #ccc;
            padding: 10px 20px;
            margin: 10px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #8b0000;
            box-shadow: 0 0 10px #8b0000;
        }

        #intro, #game, #glitch {
            transition: opacity 1s ease;
        }

        #result, #loseCount {
            margin-top: 30px;
            font-size: 22px;
            color: #ff3333;
        }

        #glitch {
            font-size: 20px;
            color: #b30000;
            white-space: pre-wrap;
            word-break: break-all;
            animation: glitch 0.12s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(1px, 1px); }
            25% { transform: translate(-1px, -2px); }
            50% { transform: translate(-3px, 1px); }
            75% { transform: translate(3px, 2px); }
            100% { transform: translate(1px, -1px); }
        }
    </style>
</head>
<body>
<div id="intro">
    <h1>æ®·æ‚¦â€¦â€¦å’Œæˆ‘ä¸€èµ·ç©ä¸ªæ¸¸æˆå—ï¼Ÿ</h1>
    <button id="yesBtn" onclick="confirmPlay()">ç©!</button>
    <button id="noBtn" onclick="refusePlay()">è°å•Šä½ </button>
</div>

<audio id="bgm" src="./bgm.mp3" preload="auto" loop></audio>

<div id="game" style="display:none;">
    <h1>å‰ªåˆ€ Â· çŸ³å¤´ Â· å¸ƒ</h1>
    <button onclick="play('å‰ªåˆ€')">âœ‚ å‰ªåˆ€</button>
    <button onclick="play('çŸ³å¤´')">ğŸª¨ çŸ³å¤´</button>
    <button onclick="play('å¸ƒ')">ğŸ“œ å¸ƒ</button>
    <div id="result"></div>
    <div id="loseCount"></div>
</div>

<div id="glitch"></div>

<script>
    let loseTimes = 0;
    let noClicks = 0;
    let bgmStarted = false; // é˜²æ­¢é‡å¤æ’­æ”¾

    function startBGM() {
        if (!bgmStarted) {
            const bgm = document.getElementById('bgm');
            bgm.volume = 0.6;
            bgm.play().catch(e => console.log("æ— æ³•æ’­æ”¾éŸ³é¢‘:", e));
            bgmStarted = true;
        }
    }

    // ---------- å‰ç½®é˜¶æ®µ ----------
    function refusePlay() {
        startBGM(); // ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼ˆæ— è®ºé€‰ä»€ä¹ˆï¼‰å°±æ’­æ”¾BGM
        noClicks++;
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const title = document.querySelector('#intro h1');

        if (noClicks === 1) {
            title.textContent = "ç¡®å®šå—ï¼Ÿ";
            noBtn.textContent = "ç¡®å®šä¸ç©";
        } else if (noClicks === 2) {
            title.textContent = "æ®·æ‚¦â€¦â€¦ä¸ç©ä¹Ÿæ²¡å…³ç³»ã€‚";
            document.body.style.background = "#050505";
            noBtn.textContent = "ä¸ç©!";
            yesBtn.textContent = "â€¦â€¦é‚£å°±ç©ä¸€æŠŠ?";
        } else if (noClicks === 3) {
            title.textContent = "ä½ ...å·²...ç»...æ— ...æ³•...å›...å¤´......";
            noBtn.style.opacity = "0.5";
            document.body.style.background = "#000";
            document.body.style.color = "#a00";
        } else if (noClicks === 4) {
            title.textContent = "ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§";
            noBtn.style.display = "none";
            yesBtn.textContent = "ä¸€èµ·ç©å§";
            yesBtn.style.background = "#600";
            yesBtn.style.color = "#fff";
        }
    }

    function confirmPlay() {
        startBGM(); // ç‚¹å‡»â€œè¦ç©â€æ—¶ä¹Ÿèƒ½è§¦å‘æ’­æ”¾
        document.getElementById('intro').style.display = 'none';
        document.getElementById('game').style.display = 'block';
    }

    // ---------- æ¸¸æˆé€»è¾‘ ----------
    function play(player) {
        const choices = ['å‰ªåˆ€', 'çŸ³å¤´', 'å¸ƒ'];
        const computer = choices[Math.floor(Math.random() * 3)];
        let result = '';

        if (player === computer) {
            result = `æ®·æ‚¦å‡ºäº†${player}ï¼Œå¯¹é¢å‡ºäº†${computer} â€”â€” å¹³å±€ã€‚`;
        } else if (
            (player === 'å‰ªåˆ€' && computer === 'å¸ƒ') ||
            (player === 'çŸ³å¤´' && computer === 'å‰ªåˆ€') ||
            (player === 'å¸ƒ' && computer === 'çŸ³å¤´')
        ) {
            result = `æ®·æ‚¦å‡ºäº†${player}ï¼Œå¯¹é¢å‡ºäº†${computer} â€”â€” å¥¹èµ¢äº†ã€‚`;
        } else {
            loseTimes++;
            result = `æ®·æ‚¦å‡ºäº†${player}ï¼Œå¯¹é¢å‡ºäº†${computer} â€”â€” å¥¹è¾“äº†ã€‚`;
        }

        document.getElementById('result').textContent = result;
        document.getElementById('loseCount').textContent = `å¤±è´¥æ¬¡æ•°ï¼š${loseTimes}/3`;

        if (loseTimes >= 3) {
            collapseScreen();
        }
    }

    // ---------- å´©æºƒé˜¶æ®µ ----------
    function collapseScreen() {
        document.getElementById('game').style.display = 'none';
        const glitch = document.getElementById('glitch');
        const chars = "â–ˆâ–“â–’â–‘â–â–Œâ––â–—â–˜â–™â–šâ–›â–œâ–â–â–Ÿ#@!$%^&*()_+=-~<>?abcdefghijklmnopqrstuvwxyz";
        let garbled = '';
        let i = 0;

        const interval = setInterval(() => {
            garbled += chars[Math.floor(Math.random() * chars.length)];
            glitch.textContent = garbled;
            i++;
            if (i > 1200) {
                clearInterval(interval);
                document.body.style.background = "#000";
                glitch.style.fontSize = "28px";
                glitch.textContent = "(ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§ä¸€èµ·ç©å§\n\nä½ é€ƒä¸æ‰äº†:)ã€‚";
            }
        }, 5);
    }
</script>
</body>
</html>
